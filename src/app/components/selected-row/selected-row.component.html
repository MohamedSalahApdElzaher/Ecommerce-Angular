<p-table [value]="products" dataKey="id" editMode="row" [tableStyle]="{'min-width': '50rem'}">

    <ng-template pTemplate="header">
        <tr>
            <th pSortableColumn="img">
                Image <p-sortIcon field="img"></p-sortIcon>
            </th>

            <th pSortableColumn="sku">
                SKU <p-sortIcon field="sku"></p-sortIcon>
            </th>
            <th pSortableColumn="name">
                Product <p-sortIcon field="name"></p-sortIcon>
            </th>
            <th pSortableColumn="description">
                Description <p-sortIcon field="description"></p-sortIcon>
            </th>
            <th pSortableColumn="unitPrice">
                Price <p-sortIcon field="unitPrice"></p-sortIcon>
            </th>
            <th pSortableColumn="unitPrice">
                Active <p-sortIcon field="active"></p-sortIcon>
            </th>
            <th pSortableColumn="date">
                Date <p-sortIcon field="date"></p-sortIcon>
            </th>
        </tr>
    </ng-template>

    <ng-template pTemplate="body" let-product let-editing="editing" let-ri="rowIndex">
        <tr [pEditableRow]="product">
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="product.imageUrl" />
                    </ng-template>
                    <ng-template pTemplate="output">
                        <img src="{{ product.imageUrl }}" style="width: 100px;height: 100px;">
                    </ng-template>
                </p-cellEditor>
            </td>

            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="product.sku">
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{product.sku}}
                    </ng-template>
                </p-cellEditor>
            </td>
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="product.name" required>
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{product.name}}
                    </ng-template>
                </p-cellEditor>
            </td>

            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="product.description" required>
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{product.description}}
                    </ng-template>
                </p-cellEditor>
            </td>

            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="product.unitPrice">
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{product.unitPrice | currency: 'USD'}}
                    </ng-template>
                </p-cellEditor>
            </td>

            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="product.active">
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{product.active}}
                    </ng-template>
                </p-cellEditor>
            </td>

            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="product.dateCreated">
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{product.dateCreated | date}}
                    </ng-template>
                </p-cellEditor>
            </td>

            <td>
                <div class="flex align-items-center justify-content-center gap-2">
                    <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil"
                        (click)="onRowEditInit(product, ri)" class="p-button-rounded p-button-text"></button>
                    <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow icon="pi pi-check"
                        (click)="onRowEditSave(product, ri)"
                        class="p-button-rounded p-button-text p-button-success mr-2"></button>
                    <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times"
                        (click)="onRowEditCancel(product, ri)"
                        class="p-button-rounded p-button-text p-button-danger"></button>
                </div>
            </td>
        </tr>
    </ng-template>
</p-table>